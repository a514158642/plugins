(function(a){function b(c){this.provice={"11":"北京","12":"天津","13":"河北","14":"山西","15":"内蒙古","21":"辽宁","22":"吉林","23":"黑龙江","31":"上海","32":"江苏","33":"浙江","34":"安徽","35":"福建","36":"江西","37":"山东","41":"河南","42":"湖北","43":"湖南","44":"广东","45":"广西","46":"海南","50":"重庆","51":"四川","52":"贵州","53":"云南","54":"西藏","61":"陕西","62":"甘肃","63":"青海","64":"宁夏","65":"新疆","71":"台湾","81":"香港","82":"澳门","91":"国外"};this.ValCodeArr=["1","0","X","9","8","7","6","5","4","3","2"];this.Wi=["7","9","10","5","8","4","2","1","6","3","7","9","10","5","8","4","2"];this.val=c}b.prototype.isDataFormat=function(f){var c=false;var d="^((\\d{2}(([02468][048])|([13579][26]))[\\-\\/\\s]?((((0?[13578])|(1[02]))"+"[\\-\\/\\s]?((0?[1-9])|([1-2][0-9])|(3[01])))|(((0?[469])|(11))[\\-\\/\\s]?"+"((0?[1-9])|([1-2][0-9])|(30)))|(0?2[\\-\\/\\s]?((0?[1-9])|([1-2][0-9])))))|("+"\\d{2}(([02468][1235679])|([13579][01345789]))[\\-\\/\\s]?((((0?[13578])|(1[02]"+"))[\\-\\/\\s]?((0?[1-9])|([1-2][0-9])|(3[01])))|(((0?[469])|(11))[\\-\\/\\s]?"+"((0?[1-9])|([1-2][0-9])|(30)))|(0?2[\\-\\/\\s]?((0?[1-9])|(1[0-9])|(2[0-8]))))"+"))(\\s(((0?[0-9])|([1-2][0-3]))\\:([0-5]?[0-9])((\\s)|(\\:([0-5]?[0-9])))))?$";var e=new RegExp(d);if(e.test(f)){c=true}return c};b.prototype.check=function(){var p=this.val;if(!p){return false}p=p.toUpperCase();var m="";var c=p.length;if(p.length!=15&&p.length!=18){return false}if(p.length==18){m=p}else{if(p.length==15){m=p.substring(0,6)+"19"+p.substring(6,15)}}p=p.toUpperCase();if(!(/(^\d{15}$)|(^\d{17}([0-9]|X)$)/.test(p))){return false}var e=m.substring(6,10);var j=m.substring(10,12);var d=m.substring(12,14);if(!this.isDataFormat(e+"-"+j+"-"+d)){return false}var o=new Date();var k=new Date(e+"-"+j+"-"+d);var l=o.getFullYear()-k.getFullYear();var h=o.getTime()-k.getTime();if(l>150||h<0){return false}if(this.provice[m.substring(0,2)]==null){return false}var f=0;for(var g=0;g<17;g++){f=f+parseInt(m.charAt(g))*parseInt(this.Wi[g])}var n=f%11;if(p.length==18&&p.charAt(17)!=this.ValCodeArr[n]){return false}return true};a.extend({checkCard:function(d){var c=new b(a("#"+d).val());return c.check()}})}(jQuery));